â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  CONFIGURACIÃ“N DEL BROKER MQTT EN TU PORTÃTIL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ PASOS A SEGUIR CUANDO ESTÃ‰S EN TU PORTÃTIL:

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1ï¸âƒ£ INSTALAR MOSQUITTO (Broker MQTT)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

OpciÃ³n A - Descarga directa:
   â€¢ Ve a: https://mosquitto.org/download/
   â€¢ Descarga el instalador para Windows (64-bit)
   â€¢ Ejecuta como Administrador
   â€¢ Instala en: C:\Program Files\mosquitto

OpciÃ³n B - Con Chocolatey (si lo tienes):
   choco install mosquitto


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2ï¸âƒ£ CONFIGURAR MOSQUITTO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Crea el archivo: C:\Program Files\mosquitto\mosquitto.conf

Contenido del archivo:
   listener 1883
   allow_anonymous true


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
3ï¸âƒ£ ABRIR PUERTO EN EL FIREWALL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Ejecuta PowerShell como Administrador y corre:

   New-NetFirewallRule -DisplayName "MQTT Mosquitto" -Direction Inbound -Protocol TCP -LocalPort 1883 -Action Allow


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
4ï¸âƒ£ INICIAR EL BROKER
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

OpciÃ³n A - Como servicio (recomendado):
   net start mosquitto

OpciÃ³n B - Manual (para ver logs):
   cd "C:\Program Files\mosquitto"
   .\mosquitto.exe -c mosquitto.conf -v


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
5ï¸âƒ£ OBTENER LA IP DE TU PORTÃTIL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

En PowerShell ejecuta:
   ipconfig

Busca en "Adaptador de LAN inalÃ¡mbrica Wi-Fi" o "Adaptador de Ethernet":
   â€¢ DirecciÃ³n IPv4 . . . . . : 192.168.1.XXX
   
Anota esta IP, la necesitarÃ¡s en el siguiente paso.


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
6ï¸âƒ£ ACTUALIZAR LOS ARCHIVOS ARDUINO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Abre estos 2 archivos en Arduino IDE:
   â€¢ ProyectoIoT/Montacargas/Montacargas.ino
   â€¢ ProyectoIoT/SensoresESP/SensoresESP.ino

En AMBOS archivos, busca esta lÃ­nea:
   const char* mqtt_server = "192.168.1.100";

CÃ¡mbiala por la IP que obtuviste en el paso 5:
   const char* mqtt_server = "192.168.1.XXX";  // Tu IP aquÃ­


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
7ï¸âƒ£ VERIFICAR QUE FUNCIONA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Para probar que el broker funciona, abre 2 ventanas de PowerShell:

Ventana 1 (Suscriptor - recibe mensajes):
   cd "C:\Program Files\mosquitto"
   .\mosquitto_sub.exe -h localhost -t "test/topic"

Ventana 2 (Publicador - envÃ­a mensajes):
   cd "C:\Program Files\mosquitto"
   .\mosquitto_pub.exe -h localhost -t "test/topic" -m "Hola MQTT"

Si ves "Hola MQTT" en la Ventana 1, Â¡funciona! âœ…


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¡ ARQUITECTURA DEL SISTEMA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ESP32 Sensores  â”€â”€â”€â”€[WiFi]â”€â”€â”€> ğŸ–¥ï¸ Tu PortÃ¡til (Broker MQTT)
   â”œâ”€ Ultrasonidos              â”œâ”€ Puerto 1883
   â”œâ”€ Luminosidad               â”œâ”€ TÃ³picos:
   â”œâ”€ DHT11                     â”‚  â€¢ montacargas/sensores/distancia
   â””â”€ Publica datos             â”‚  â€¢ montacargas/sensores/luminosidad
                                 â”‚  â€¢ montacargas/sensores/temperatura
                                 â”‚  â€¢ montacargas/sensores/humedad
                                 
ESP32 Montacargas â”€â”€[WiFi]â”€â”€â”€> ğŸ–¥ï¸ Tu PortÃ¡til (Broker MQTT)
   â”œâ”€ Recibe datos              â””â”€ Retransmite mensajes
   â”œâ”€ Control relÃ©s
   â”œâ”€ Servidor Web
   â””â”€ Muestra info en web


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš ï¸ IMPORTANTE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ“ Ambos ESP32 y tu portÃ¡til deben estar en la MISMA RED WiFi
âœ“ La IP de tu portÃ¡til puede cambiar (usa IP estÃ¡tica o anÃ³tala siempre)
âœ“ El firewall de Windows debe permitir el puerto 1883
âœ“ Si usas un router, verifica que no bloquee comunicaciÃ³n entre dispositivos


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ï¿½ CONFIGURAR NEWS API (Widget de Noticias IoT)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Ve a: https://newsapi.org
2. RegÃ­strate gratis (100 peticiones/dÃ­a)
3. Copia tu API Key
4. En Montacargas.ino, busca esta lÃ­nea:
   const char* newsApiKey = "64cac7cb2c8b49b599852cb50d4e97dd";

5. Reemplaza con tu API Key:
   const char* newsApiKey = "TU_API_KEY_AQUI";

âš ï¸ IMPORTANTE: Sin API Key vÃ¡lida, el widget de noticias mostrarÃ¡
   un error, pero el resto del sistema funcionarÃ¡ normalmente.


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“š LIBRERÃAS ARDUINO NECESARIAS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Instala en Arduino IDE (Herramientas > Administrar Bibliotecas):
   â€¢ PubSubClient (by Nick O'Leary)
   â€¢ DHT sensor library (by Adafruit)
   â€¢ Adafruit Unified Sensor
   â€¢ ArduinoJson (by Benoit Blanchon) - Para parseo de noticias
   â€¢ LiquidCrystal I2C (by Frank de Brabander)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“± ACCEDER A LA INTERFAZ WEB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Una vez que hayas cargado el cÃ³digo en ambos ESP32:

1. Abre el Monitor Serie del ESP32 Montacargas
2. Busca la lÃ­nea que dice: "IP: 192.168.X.XXX"
3. Anota esa IP
4. Abre un navegador en tu portÃ¡til
5. Ve a: http://192.168.X.XXX

La interfaz web mostrarÃ¡:
   â€¢ Planta actual del montacargas
   â€¢ Temperatura y humedad
   â€¢ Estado de iluminaciÃ³n
   â€¢ Botones para enviar a cada planta
   â€¢ Widget con noticias de IoT en tiempo real


